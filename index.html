<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EliteGaming | Ultimate Live Control Node</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Inter:wght@400;700;900&display=swap');
        :root { --gold: #f59e0b; --dark: #010206; --glass: rgba(15, 23, 42, 0.98); }
        body { background: var(--dark); color: #f1f5f9; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        .font-orbit { font-family: 'Orbitron', sans-serif; }
        .glass { background: var(--glass); backdrop-filter: blur(20px); border: 1px solid rgba(255,215,0,0.1); }
        .btn-gold { background: linear-gradient(145deg, #f59e0b, #d97706); color: #000; font-weight: 900; }
        .hidden { display: none !important; }
        .animate-scroll { animation: scroll 25s linear infinite; white-space: nowrap; }
        @keyframes scroll { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
        .banner-box { height: 180px; background-size: cover; background-position: center; border-radius: 2rem; border: 1px solid rgba(255,255,255,0.1); }
    </style>
</head>
<body class="overflow-x-hidden">

    <div class="fixed top-0 w-full z-[100] bg-black/95 py-2 border-b border-amber-500/20">
        <div id="scrollingNotice" class="animate-scroll text-amber-500 text-[10px] font-black uppercase italic">
            EliteGaming: Loading Live Updates...
        </div>
    </div>

    <div id="authBox" class="min-h-screen flex flex-col items-center p-6 pt-16">
        <div class="w-full max-w-md text-center">
            <h1 id="siteName" class="text-4xl font-black italic text-amber-500 mb-2 font-orbit uppercase">EliteGaming</h1>
            <div id="mainBanner" class="banner-box mb-8 relative shadow-2xl mt-4" style="background-image: url('https://i.ibb.co/pWfSgG9/poster-placeholder.jpg');">
                <div class="absolute inset-0 bg-black/40 rounded-[2rem]"></div>
                <div class="absolute bottom-4 left-6 text-left">
                    <p id="bannerTitle" class="text-white font-black text-xl italic uppercase">Elite Mega Offer</p>
                </div>
            </div>

            <div id="loginForm" class="space-y-4">
                <input id="email" type="email" placeholder="Email Address" class="w-full p-4 bg-black border border-white/10 rounded-2xl outline-none focus:border-amber-500">
                <input id="pass" type="password" placeholder="Password" class="w-full p-4 bg-black border border-white/10 rounded-2xl outline-none focus:border-amber-500">
                <button onclick="handleAuth('login')" class="w-full py-4 btn-gold rounded-2xl font-black uppercase">Login</button>
                <button onclick="toggleAuth('reg')" class="text-[9px] text-amber-500 font-black uppercase underline mt-2 block mx-auto">Create Account</button>
            </div>
            
            <div id="regForm" class="hidden space-y-4">
                <input id="regEmail" type="email" placeholder="New Email" class="w-full p-4 bg-black border border-white/10 rounded-2xl outline-none">
                <input id="regPass" type="password" placeholder="New Password" class="w-full p-4 bg-black border border-white/10 rounded-2xl outline-none">
                <button onclick="handleAuth('reg')" class="w-full py-4 bg-emerald-600 text-black font-black rounded-2xl uppercase">Register</button>
                <button onclick="toggleAuth('login')" class="text-[9px] text-slate-500 uppercase underline mt-4">Back</button>
            </div>
        </div>
    </div>

    <div id="dashboard" class="hidden pt-20 pb-24 max-w-lg mx-auto px-4">
        <header class="glass p-8 rounded-[3.5rem] flex justify-between items-center border-l-8 border-amber-500 mb-8 shadow-2xl">
            <div>
                <p class="text-[9px] text-amber-500 font-black uppercase italic tracking-widest">VIP Elite Node</p>
                <h1 id="uBalDisp" class="text-4xl font-black font-orbit text-white mt-1 italic">৳ 0.00</h1>
            </div>
            <div class="flex gap-2">
                <button id="masterBtn" onclick="toggleAdmin(true)" class="hidden bg-red-600 px-4 py-2 rounded-xl text-[9px] font-black animate-pulse uppercase">Master HQ</button>
                <button onclick="logout()" class="w-12 h-12 glass rounded-2xl flex items-center justify-center text-red-500"><i class="fas fa-sign-out-alt"></i></button>
            </div>
        </header>

        <div class="grid grid-cols-2 gap-4 mb-10">
            <button onclick="openW('deposit')" class="p-6 btn-gold rounded-[2.5rem] uppercase text-[10px] font-black shadow-xl">Deposit</button>
            <button onclick="openW('withdraw')" class="p-6 bg-slate-900 text-white font-black rounded-[2.5rem] uppercase text-[10px] border border-white/10 shadow-xl">Withdraw</button>
        </div>

        <div id="gameGrid" class="grid grid-cols-3 gap-3"></div>
    </div>

    <div id="adminPanel" class="hidden fixed inset-0 z-[500] bg-black p-6 overflow-y-auto">
        <div class="max-w-5xl mx-auto pb-20">
            <div class="flex justify-between items-center mb-10 border-b border-white/10 pb-6">
                <h1 class="text-2xl font-black text-red-600 font-orbit italic">ULTIMATE MASTER HQ</h1>
                <button onclick="toggleAdmin(false)" class="bg-white/10 px-6 py-2 rounded-xl text-[10px] font-black uppercase">Close</button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10">
                <div class="glass p-8 rounded-[3rem] border-l-4 border-amber-500">
                    <h3 class="text-[10px] font-black text-amber-500 uppercase mb-4">Site & Banner</h3>
                    <input id="setSiteName" type="text" placeholder="Site Name" class="w-full bg-black p-4 rounded-xl text-xs border border-white/10 mb-2">
                    <input id="setBannerUrl" type="text" placeholder="Banner URL" class="w-full bg-black p-4 rounded-xl text-xs border border-white/10 mb-2">
                    <input id="setBannerText" type="text" placeholder="Banner Text" class="w-full bg-black p-4 rounded-xl text-xs border border-white/10 mb-4">
                    <button onclick="updateSiteContent()" class="w-full py-3 bg-amber-500 text-black font-black rounded-xl text-[9px] uppercase">Update Site</button>
                </div>

                <div class="glass p-8 rounded-[3rem] border-l-4 border-blue-500">
                    <h3 class="text-[10px] font-black text-blue-500 uppercase mb-4">Gateways & Support</h3>
                    <input id="setBkash" type="text" placeholder="bKash Number" class="w-full bg-black p-4 rounded-xl text-xs border border-white/10 mb-2">
                    <input id="setNagad" type="text" placeholder="Nagad Number" class="w-full bg-black p-4 rounded-xl text-xs border border-white/10 mb-2">
                    <input id="setRocket" type="text" placeholder="Rocket Number" class="w-full bg-black p-4 rounded-xl text-xs border border-white/10 mb-2">
                    <input id="setWP" type="text" placeholder="WhatsApp Number" class="w-full bg-black p-4 rounded-xl text-xs border border-white/10 mb-4">
                    <button onclick="updateSupport()" class="w-full py-3 bg-blue-600 text-white font-black rounded-xl text-[9px] uppercase">Update Gateways</button>
                </div>
            </div>

            <div id="adminQueue" class="space-y-4"></div>
        </div>
    </div>

    <div id="walletModal" class="fixed inset-0 z-[300] bg-black/98 hidden flex items-center justify-center p-6 text-center">
        <div class="glass w-full max-w-sm p-10 rounded-[4rem] border-t-4 border-amber-500 shadow-2xl">
            <h2 id="modalT" class="text-2xl font-black text-amber-500 mb-8 italic uppercase">Transaction</h2>
            <div id="depArea" class="hidden mb-6">
                <div class="flex flex-col gap-2 mb-6 text-left">
                    <div class="flex justify-between bg-white/5 p-3 rounded-xl border border-white/5"><span class="text-[10px] font-black text-slate-400">bKash:</span><span id="dispBkash" class="text-[10px] font-black text-amber-500">...</span></div>
                    <div class="flex justify-between bg-white/5 p-3 rounded-xl border border-white/5"><span class="text-[10px] font-black text-slate-400">Nagad:</span><span id="dispNagad" class="text-[10px] font-black text-amber-500">...</span></div>
                    <div class="flex justify-between bg-white/5 p-3 rounded-xl border border-white/5"><span class="text-[10px] font-black text-slate-400">Rocket:</span><span id="dispRocket" class="text-[10px] font-black text-amber-500">...</span></div>
                </div>
                <input id="trxId" type="text" placeholder="TrxID" class="w-full p-4 bg-black border border-white/10 rounded-2xl text-[10px] font-black uppercase text-center focus:border-amber-500 outline-none">
            </div>
            <input id="amt" type="number" placeholder="৳ 0.00" class="w-full p-6 bg-black border border-white/10 rounded-[2rem] text-center text-3xl font-black mb-8 text-amber-500 outline-none">
            <button onclick="submitR()" class="w-full py-5 btn-gold rounded-[2rem] uppercase text-[10px] font-black">Confirm</button>
            <button onclick="closeW()" class="mt-6 text-[10px] text-slate-600 font-black uppercase underline italic">Back</button>
        </div>
    </div>

    <a id="chatLink" href="#" target="_blank" class="fixed bottom-6 right-6 w-14 h-14 bg-[#25d366] rounded-2xl flex items-center justify-center text-white text-2xl shadow-2xl z-[1000] animate-bounce"><i class="fab fa-whatsapp"></i></a>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, setDoc, onSnapshot, updateDoc, collection, addDoc, query, where, getDocs, deleteDoc, increment } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // Your Firebase Config (Keep it updated)
        const firebaseConfig = {
            apiKey: "AIzaSyAj0SrEMzJDqMDbFetnWOGQJPIw7nuJANw",
            authDomain: "elitegaming1988-bda90.firebaseapp.com",
            projectId: "elitegaming1988-bda90",
            storageBucket: "elitegaming1988-bda90.firebasestorage.app",
            messagingSenderId: "244948783648",
            appId: "1:244948783648:web:120635dd33292626836245"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const MASTER = "elitegaming1988bd@gmail.com";

        // Real-Time System Sync
        onSnapshot(doc(db, "system", "config"), (s) => {
            if(s.exists()) {
                const d = s.data();
                document.getElementById('siteName').innerText = d.siteName || "EliteGaming";
                document.getElementById('mainBanner').style.backgroundImage = `url('${d.bannerUrl}')`;
                document.getElementById('bannerTitle').innerText = d.bannerText;
                document.getElementById('dispBkash').innerText = d.bkash || "Soon";
                document.getElementById('dispNagad').innerText = d.nagad || "Soon";
                document.getElementById('dispRocket').innerText = d.rocket || "Soon";
                document.getElementById('chatLink').href = `https://wa.me/${d.whatsapp}`;
                // Fill Admin
                document.getElementById('setSiteName').value = d.siteName || "";
                document.getElementById('setBkash').value = d.bkash || "";
                document.getElementById('setNagad').value = d.nagad || "";
                document.getElementById('setRocket').value = d.rocket || "";
                document.getElementById('setWP').value = d.whatsapp || "";
            }
        });

        // Auth Logic
        onAuthStateChanged(auth, (user) => {
            if(user) {
                document.getElementById('authBox').classList.add('hidden');
                document.getElementById('dashboard').classList.remove('hidden');
                if(user.email === MASTER) document.getElementById('masterBtn').classList.remove('hidden');
                onSnapshot(doc(db, "users", user.uid), (snap) => {
                    if(snap.exists()) document.getElementById('uBalDisp').innerText = "৳ " + snap.data().balance.toLocaleString();
                });
            } else {
                document.getElementById('authBox').classList.remove('hidden');
                document.getElementById('dashboard').classList.add('hidden');
            }
        });

        // Admin Actions
        window.updateSiteContent = async () => {
            await setDoc(doc(db, "system", "config"), {
                siteName: document.getElementById('setSiteName').value,
                bannerUrl: document.getElementById('setBannerUrl').value,
                bannerText: document.getElementById('setBannerText').value
            }, { merge: true });
            alert("Site Settings Updated!");
        };

        window.updateSupport = async () => {
            await setDoc(doc(db, "system", "config"), {
                bkash: document.getElementById('setBkash').value,
                nagad: document.getElementById('setNagad').value,
                rocket: document.getElementById('setRocket').value,
                whatsapp: document.getElementById('setWP').value
            }, { merge: true });
            alert("Gateways Updated!");
        };

        window.toggleAdmin = (s) => {
            document.getElementById('adminPanel').classList.toggle('hidden', !s);
            if(s) {
                onSnapshot(collection(db, "requests"), (snap) => {
                    const q = document.getElementById('adminQueue'); q.innerHTML = "";
                    snap.forEach(d => {
                        const r = d.data();
                        q.innerHTML += `<div class="p-6 glass rounded-[2rem] flex justify-between items-center border-l-4 border-amber-500 mb-4 shadow-xl"><div class="text-[10px] font-black uppercase text-slate-400">${r.email}<br><span class="text-xl text-white">৳${r.amount}</span><br>TRX: ${r.trx}</div><button onclick="approveReq('${d.id}', '${r.uid}', ${r.amount}, '${r.type}')" class="bg-emerald-600 px-6 py-2 rounded-xl text-[10px] font-black text-black">APPROVE</button></div>`;
                    });
                });
            }
        };

        window.approveReq = async (id, uid, amt, type) => {
            const bonus = type === 'deposit' ? (amt * 5) + amt : amt;
            await updateDoc(doc(db, "users", uid), { balance: increment(type === 'withdraw' ? -amt : bonus) });
            await deleteDoc(doc(db, "requests", id));
            alert("Success!");
        };

        window.handleAuth = async (mode) => {
            const e = document.getElementById(mode === 'login' ? 'email' : 'regEmail').value;
            const p = document.getElementById(mode === 'login' ? 'pass' : 'regPass').value;
            try {
                if(mode === 'login') await signInWithEmailAndPassword(auth, e, p);
                else {
                    const res = await createUserWithEmailAndPassword(auth, e, p);
                    await setDoc(doc(db, "users", res.user.uid), { email: e, balance: 0, uid: res.user.uid, winPct: 10 });
                }
            } catch (err) { alert(err.message); }
        };

        window.submitR = async () => {
            const amount = parseFloat(document.getElementById('amt').value);
            const trx = document.getElementById('trxId').value.trim().toUpperCase();
            if(!amount || (wType === 'deposit' && !trx)) return alert("Fill data!");
            await addDoc(collection(db, "requests"), { uid: auth.currentUser.uid, email: auth.currentUser.email, amount, trx, type: wType, status: "pending", time: new Date() });
            alert("Sent!"); closeW();
        };

        // UI
        const providers = ["JILI", "PG SOFT", "PRAGMATIC", "JDB", "FC", "KA"];
        providers.forEach(n => {
            document.getElementById('gameGrid').innerHTML += `<div class="glass p-5 rounded-[2rem] text-center border border-white/5" onclick="alert('Loading...')"><p class="text-[8px] font-black text-white uppercase italic">${n}</p></div>`;
        });
        window.logout = () => signOut(auth);
        window.toggleAuth = (m) => {
            document.getElementById('loginForm').classList.toggle('hidden', m === 'reg');
            document.getElementById('regForm').classList.toggle('hidden', m === 'login');
        };
        let wType = '';
        window.openW = (t) => {
            wType = t; document.getElementById('modalT').innerText = t.toUpperCase();
            document.getElementById('depArea').classList.toggle('hidden', t !== 'deposit');
            document.getElementById('walletModal').classList.remove('hidden');
        };
        window.closeW = () => document.getElementById('walletModal').classList.add('hidden');
    </script>
</body>
</html>

